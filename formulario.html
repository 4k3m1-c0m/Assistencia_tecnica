<!DOCTYPE html>
<html lang="pt-br">
<head>
    <link rel="stylesheet" href="form.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Assistência Técnica de Hardware</title>
</head>
<body>
    <form id="form-assistencia" class="card">
        <h1>Assistência Técnica de Hardware</h1>
        <h3>Cadastro de Solicitação de Serviço</h3>
        <hr style="border: 0; border-top: 1px solid #085c80; margin-bottom: 25px;">

        <label for="nome">Nome Completo:</label>
        <input type="text" name="nome" id="nome" required autofocus>

        <label for="email">Email:</label>
        <input type="email" name="email" id="email" required placeholder="Exemplo: email@email.com">

        <label for="telefone">Telefone:</label>
        <input type="tel" name="telefone" id="telefone" required>

        <label for="dt-nasc">Data de Nascimento:</label>
        <input type="date" name="dt-nasc" id="dt-nasc" required>

        <div class="row-dupla">
            <div class="campo-metade">
                <label for="modelo">Modelo do Equipamento:</label>
                <input type="text" name="modelo" id="modelo" required>
            </div>
            <div class="campo-metade">
                <label for="marca">Marca:</label>
                <input type="text" name="marca" id="marca" required>
            </div>
        </div>

        <label for="sintomas">Descrição do Problema:</label>
        <textarea name="sintomas" id="sintomas" rows="4" required></textarea>

        <fieldset>
            <legend>Tipo de Equipamento</legend>
            <label class="opcao-inline"><input type="radio" name="tipo" value="Computador" required> Computador</label>
            <label class="opcao-inline"><input type="radio" name="tipo" value="Notebook"> Notebook</label>
            <label class="opcao-inline"><input type="radio" name="tipo" value="Monitor"> Monitor</label>
            <label class="opcao-inline"><input type="radio" name="tipo" value="Impressora"> Impressora</label>
            <label class="opcao-inline"><input type="radio" name="tipo" value="Outros"> Outros</label>
        </fieldset>

        <label for="urgencia">Nível de Urgência:</label>
        <select name="urgencia" id="urgencia" required>
            <option value="">Selecione...</option>
            <option value="Baixa">Baixa</option>
            <option value="Média">Média</option>
            <option value="Alta">Alta</option>
        </select>

        <label for="data-envio">Data de Envio:</label>
        <input type="date" name="data-envio" id="data-envio" required>

        <label for="foto">Foto do Equipamento (Opcional):</label>
        <input type="file" name="foto" id="foto">

        <button type="submit" class="btn-enviar">Enviar Chamado</button>
        
        <br><br>
        <a href="index.html" style="display:block; text-align:center; color:#2d88af; text-decoration:none;">&larr; Voltar a página inicial</a>
    </form> 

    <script>
        document.getElementById('form-assistencia').addEventListener('submit', function(e) {
            e.preventDefault(); 

            const inputFoto = document.getElementById('foto');
            let nomeArquivoFoto = "Nenhuma foto selecionada";
            if (inputFoto.files.length > 0) {
                nomeArquivoFoto = inputFoto.files[0].name;
            }

            const tipoEquipamento = document.querySelector('input[name="tipo"]:checked')?.value || "Não informado";

            const dados = {
                nome: document.getElementById('nome').value,
                email: document.getElementById('email').value,
                telefone: document.getElementById('telefone').value,
                nascimento: document.getElementById('dt-nasc').value,
                modelo: document.getElementById('modelo').value,
                marca: document.getElementById('marca').value,
                sintomas: document.getElementById('sintomas').value,
                tipoEquipamento: tipoEquipamento,
                urgencia: document.getElementById('urgencia').value,
                dataEnvio: document.getElementById('data-envio').value,
                foto: nomeArquivoFoto
            };

            localStorage.setItem('dadosAssistencia', JSON.stringify(dados));
            window.location.href = 'enviado.html';
        });
    </script>
</body>
</html>